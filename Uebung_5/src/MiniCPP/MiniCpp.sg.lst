Coco-2 SG (source: ..\MiniCPP\MiniCpp.atg)

    1| /* Attributed grammar for MiniCPP */
    2| COMPILER MiniCPP
    3| 
    4| SEM<<
    5| 	private static int stc = 0;
    6| 	private static int mc  = 0;
    7| >>
    8| 
    9| 
   10| CHARACTER SETS
   11| 	digit		= '0' .. '9'.
   12| 	letter		= 'a' .. 'z' + 'A' .. 'Z' .
   13| 	whiteSpace	= CHR(9) + EOL IGNORE. /*' ' ignored by default*/
   14| 	noquote		= ANY - '"'.
   15| 
   16| COMMENTS
   17| 	FROM '//' TO EOL.
   18| 	FROM '/*' TO '*/'.
   19| 
   20| KEYWORDS
   21| 	'void'.  'new'. 'return'. 'const'. 'break'.
   22| 	'int'. 'false'. 'true'.  'bool'.
   23| 	'scanf'. 'printf'. 'cin'. 'cout'. 'endl'.
   24| 	'if'. 'while'.  'else'. 'for'. 'delete'.
   25| 
   26| TOKENS
   27| 	';'. ','.
   28| 	'='. '+'. '-'. '++'. '--'. '/'. '*'. '%'.
   29| 	'||'. '&&'. '<'. '>'. '<<'. '>>'. '<='. '>='. '=='. '!='. '!'.
   30| 	'('. ')'. '['. ']'. '{'. '}'.
   31| 
   32| TOKEN CLASSES
   33| 	number = digit { digit }.
   34| 	ident = ( letter | '_' ) { letter | digit | '_' }.
   35| 	string = '"' { noquote } '"'.
   36| 
   37| NONTERMINALS
   38| 	MiniCPP.
   39| 	ConstDecl.
   40| 	Init.
   41| 	VarDef.
   42| 	FuncHead.
   43| 	FormParList.
   44| 	Type.
   45| 	Block.
   46| 	Stat.
   47| 	Expr.
   48| 	Term.
   49| 	Fact.
   50| 	ActParList.
   51| 	IfStat.
   52| 	WhileStat.
   53| 	BreakStat.
   54| 	InputStat.
   55| 	OutputStat.
   56| 	DeleteStat.
   57| 	ReturnStat.
   58| 	OrExpr.
   59| 	AndExpr.
   60| 	RelExpr.
   61| 	SimpleExpr.
   62| 	NotFact.
   63| 	VarDefOrFuncDeclOrDef.
   64| 	FormParListRest.
   65| 	NonVoidType.
   66| 	IdentStat.
   67| 
   68| 	RULES
   69| 
   70| 		MiniCPP               = { ConstDecl | VarDefOrFuncDeclOrDef }
   71| 														SEM<<
   72| 																	Console.WriteLine($"Lines of code: {MiniCPPLex.tokenLine - 1}");
   73| 																  Console.WriteLine($"Lines of statements: {stc}");
   74| 																  Console.WriteLine($"Complexity by McCabe: {mc}");
   75| 														>>.
   76| 		VarDefOrFuncDeclOrDef = Type [ '*' ] ident (VarDef | FuncHead (';' | Block)) .
   77| 		ConstDecl             = 'const' Type ident Init ';'.
   78| 		Init                  = '=' ( false | true | number ) .
   79| 		VarDef                =	[ Init ] { ',' [ '*' ] ident [ Init ] } ';'.
   80| 		FuncHead              = '(' [ FormParList ] ')' .
   81| 		FormParList           =	( 'void' [ FormParListRest ] | NonVoidType FormParListRest ).
   82| 		FormParListRest       = [ '*' ] ident [ '[' ']' ] { ',' Type [ '*' ] ident [ '[' ']' ] } .
   83| 		Type                  = 'void' | NonVoidType .
   84| 		NonVoidType           = 'bool' | 'int' .
   85| 		Block                 =	'{' { ConstDecl | Type [ '*' ] ident VarDef | Stat } '}'.
   86| 		Stat                  = SEM<<stc++;>> ( IdentStat | IfStat | WhileStat | BreakStat | InputStat
   87| 		                        | OutputStat | DeleteStat | ReturnStat | Block | ';' ).
   88| 		IdentStat             =	ident ('++' | '--' | [ '[' Expr ']' ] '=' Expr | '(' [ ActParList ] ')') ';'.
   89| 		ActParList            = Expr { ',' Expr } .
   90| 		IfStat                = SEM<<mc++;>> 'if' '(' Expr ')' Stat [ 'else' Stat SEM<<mc++;>>].
   91| 		WhileStat             = SEM<<mc++;>> 'while' '(' Expr ')' Stat .
   92| 		BreakStat             = 'break' ';' .
   93| 		InputStat             = 'cin'  '>>' ident ';' .
   94| 		OutputStat            = 'cout' '<<' ( Expr | string | 'endl' ) { '<<' ( Expr | string | 'endl' ) } ';' .
   95| 		DeleteStat            = 'delete' '[' ']' ident ';' .
   96| 		ReturnStat            = 'return' [ Expr ] ';' .
   97| 		Expr                  =	OrExpr .
   98| 		OrExpr                = AndExpr { '||' AndExpr } .
   99| 		AndExpr               = RelExpr { '&&' RelExpr } .
  100| 		RelExpr               =	SimpleExpr [ ( '==' | '!=' | '<' | '<=' | '>' | '>=' ) SimpleExpr ] .
  101| 		SimpleExpr            = [ '+' | '-' ] Term { ( '+' | '-' ) Term } .
  102| 		Term                  = NotFact { ( '*' | '/' | '%' )  NotFact } .
  103| 		NotFact               = [ '!' ] Fact .
  104| 		Fact                  = 'false'
  105| 		                        | 'true'
  106| 														| number
  107| 														| ident [ ( '[' Expr ']' )
  108| 														| ( '(' [ ActParList ] ')' ) ]
  109| 														| 'new' Type '[' Expr ']'
  110| 														| '(' Expr ')' .
  111| 
  112| 	END MiniCPP.


error(s) and warning(s):
-----------------------

    0 lexical error(s) 
    0 syntax error(s)  
    0 semantic error(s)
    0 warning(s)       


start table:
-----------

   '!'                    30 | '\"'                     27
   '%'                     8 | '&'                      11
   '('                    19 | ')'                      20
   '*'                     7 | '+'                      31
   ','                     3 | '-'                      32
   '/'                     6 | '0'..'9'                 25
   ';'                     2 | '<'                      33
   '='                    34 | '>'                      35
   'A'..'Z'               26 | '['                      21
   ']'                    22 | '_'                      26
   'a'..'f'               29 | 'g'                      26
   'h'..'i'               29 | 'j'                      26
   'k'..'l'               29 | 'm'                      26
   'n'..'p'               29 | 'q'                      26
   'r'..'w'               29 | 'x'..'z'                 26
   '{'                    23 | '|'                       9
   '}'                    24 | ELSE                      0
   

ignored characters:
------------------

{ HT..LF, ' ' }

comment starts:
--------------

{ '/' }

character classes:
-----------------

1: { '0'..'9' }

2: { 'A'..'Z', 'a'..'z' }

3: { EF..'!', '#'..'Ã¿' }

4: { 'a'..'f', 'h'..'i', 'k'..'l', 'n'..'p', 'r'..'w' }

5: { 'A'..'Z', 'g', 'j', 'm', 'q', 'x'..'z' }
