Coco-2 SG (source: ..\MiniCPP\MiniCPP.atg)

    1| /* Attributed grammar for MiniCPP */
    2| COMPILER MiniCPP
    3| 
    4| SEM<<
    5| 	private static int loc = 0;
    6| 	private static int stc = 0;
    7| 	private static int mc  = 0;
    8| >>
    9| 
   10| 
   11| CHARACTER SETS
   12| 	digit		= '0' .. '9'.
   13| 	letter		= 'a' .. 'z' + 'A' .. 'Z' .
   14| 	whiteSpace	= CHR(9) + EOL IGNORE. /*' ' ignored by default*/
   15| 	noquote		= ANY - '"'.
   16| 
   17| COMMENTS
   18| 	FROM '//' TO EOL.
   19| 	FROM '/*' TO '*/'.
   20| 
   21| KEYWORDS
   22| 	'void'. 'scanf'. 'printf'. 'int'. 'false'. 'true'. 'const'. 'if'. 'while'. 'break'. 'cin'. 'cout'. 'else'. 'for'. 'delete'. 'new'. 'endl'. 'return'. 'bool'.
   23| 
   24| TOKENS
   25| 	 '{'. '}'. ','. ';'. '='. '++'. '--'. '<<'. '>>'. '||'. '&&'. '=='. '!='. '<='. '>='.
   26| 	 '+'. '-'. '*'. '['. ']'. '%'. '!'. '>'. '<'. '/'. '('. ')'.
   27| 
   28| TOKEN CLASSES
   29| 	number = digit { digit }.
   30| 	ident = ( letter | '_' ) { letter | digit | '_' }.
   31| 	string = '"' { noquote } '"'.
   32| 
   33| NONTERMINALS
   34| 	MiniCPP.
   35| 	ConstDecl.
   36| 	Init.
   37| 	VarDef.
   38| 	FuncHead.
   39| 	FormParList.
   40| 	Type.
   41| 	Block.
   42| 	Stat.
   43| 	Expr.
   44| 	Term.
   45| 	Fact.
   46| 	ActParList.
   47| 	IfStat.
   48| 	WhileStat.
   49| 	BreakStat.
   50| 	InputStat.
   51| 	OutputStat.
   52| 	DeleteStat.
   53| 	ReturnStat.
   54| 	OrExpr.
   55| 	AndExpr.
   56| 	RelExpr.
   57| 	SimpleExpr.
   58| 	NotFact.
   59| 	VarDefOrFuncDeclOrDef.
   60| 	FormParListRest.
   61| 	NonVoidType.
   62| 	IdentStat.
   63| 
   64| 	RULES
   65| 
   66| 		MiniCPP               = { ConstDecl | VarDefOrFuncDeclOrDef }
   67| 														SEM<<
   68| 																	Console.WriteLine($"Lines of code: {loc}");
   69| 																  Console.WriteLine($"Lines of statements: {stc}");
   70| 																  Console.WriteLine($"Complexity by McCabe: {mc}");
   71| 														>>.
   72| 		VarDefOrFuncDeclOrDef = Type [ '*' ] ident (VarDef | FuncHead (';' SEM<<loc++;>> | Block)) .
   73| 		ConstDecl             = 'const' Type ident Init ';' SEM<<loc++;>> .
   74| 		Init                  = '=' ( false | true | number ) .
   75| 		VarDef                =	[ Init ] { ',' [ '*' ] ident [ Init ] } ';' SEM<<loc++;>>.
   76| 		FuncHead              = '(' [ FormParList ] ')' .
   77| 		FormParList           =	( 'void' [ FormParListRest ] | NonVoidType FormParListRest ).
   78| 		FormParListRest       = [ '*' ] ident [ '[' ']' ] { ',' Type [ '*' ] ident [ '[' ']' ] } .
   79| 		Type                  = 'void' | NonVoidType .
   80| 		NonVoidType           = 'bool' | 'int' .
   81| 		Block                 =	'{' { ConstDecl | Type [ '*' ] ident VarDef | Stat } '}'.
   82| 		Stat                  = ( IdentStat | IfStat | WhileStat | BreakStat | InputStat
   83| 		                        | OutputStat | DeleteStat | ReturnStat | Block | ';' )
   84| 														SEM<<loc++; stc++;>>.
   85| 		IdentStat             =	ident ('++' | '--' | [ '[' Expr ']' ] '=' Expr | '(' [ ActParList ] ')') ';'.
   86| 		ActParList            = Expr { ',' Expr } .
   87| 		IfStat                = 'if' '(' Expr ')' Stat [ 'else' Stat SEM<<mc++;>>] SEM<<loc++;mc++;>>.
   88| 		WhileStat             = 'while' '(' Expr ')' Stat .
   89| 		BreakStat             = 'break' ';' .
   90| 		InputStat             = 'cin'  '>>' ident ';' .
   91| 		OutputStat            = 'cout' '<<' ( Expr | string | 'endl' ) { '<<' ( Expr | string | 'endl' ) } ';' .
   92| 		DeleteStat            = 'delete' '[' ']' ident ';' .
   93| 		ReturnStat            = 'return' [ Expr ] ';' .
   94| 		Expr                  =	OrExpr .
   95| 		OrExpr                = AndExpr { '||' AndExpr } .
   96| 		AndExpr               = RelExpr { '&&' RelExpr } .
   97| 		RelExpr               =	SimpleExpr [ ( '==' | '!=' | '<' | '<=' | '>' | '>=' ) SimpleExpr ] .
   98| 		SimpleExpr            = [ '+' | '-' ] Term { ( '+' | '-' ) Term } .
   99| 		Term                  = NotFact { ( '*' | '/' | '%' )  NotFact } .
  100| 		NotFact               = [ '!' ] Fact .
  101| 		Fact                  = 'false'
  102| 		                        | 'true'
  103| 														| number
  104| 														| ident [ ( '[' Expr ']' )
  105| 														| ( '(' [ ActParList ] ')' ) ]
  106| 														| 'new' Type '[' Expr ']'
  107| 														| '(' Expr ')' .
  108| 
  109| 	END MiniCPP.


error(s) and warning(s):
-----------------------

    0 lexical error(s) 
    0 syntax error(s)  
    0 semantic error(s)
    0 warning(s)       


start table:
-----------

   '!'                    30 | '\"'                     27
   '%'                    21 | '&'                      12
   '('                    23 | ')'                      24
   '*'                    18 | '+'                      31
   ','                     4 | '-'                      32
   '/'                    22 | '0'..'9'                 25
   ';'                     5 | '<'                      33
   '='                    34 | '>'                      35
   'A'..'Z'               26 | '['                      19
   ']'                    20 | '_'                      26
   'a'..'f'               29 | 'g'                      26
   'h'..'i'               29 | 'j'                      26
   'k'..'l'               29 | 'm'                      26
   'n'..'p'               29 | 'q'                      26
   'r'..'w'               29 | 'x'..'z'                 26
   '{'                     2 | '|'                      10
   '}'                     3 | ELSE                      0
   

ignored characters:
------------------

{ HT..LF, ' ' }

comment starts:
--------------

{ '/' }

character classes:
-----------------

1: { '0'..'9' }

2: { 'A'..'Z', 'a'..'z' }

3: { EF..'!', '#'..'Ã¿' }

4: { 'a'..'f', 'h'..'i', 'k'..'l', 'n'..'p', 'r'..'w' }

5: { 'A'..'Z', 'g', 'j', 'm', 'q', 'x'..'z' }
